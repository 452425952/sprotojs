;var utils=require('./utils');var Long=require('long');var sproto=(function(){var t={};var A={};var B={};var C=0;var D=1;var E=0;var F=1;var G=2;var H=3;var I=0;var J=1;var K=-1;var L=-2;var M=-3;var N=0x80;var O=1000;var P=4;var Q=2;var R=2;var S=2050;var T=0x1000000;var U=64;function expand64(v){var a=v;if((a&0x80000000)!=0){a=0x0000000000000+(a&0xFFFFFFFF)}return a}function hi_low_uint64(a,b){var c=(b&0xFFFFFFFF)*0x100000000+a;return c}function hi_low_long(a,b){var c=new Long(a,b,0x100000000).toString();return c}function uint64_lshift(a,b){return a*Math.pow(2,b)}function uint64_rshift(a,b){return Math.floor(a/Math.pow(2,b))}function toword(a){return(a[0]&0xff)|(a[1]&0xff)<<8};function todword(a){return((a[0]&0xff)|(a[1]&0xff)<<8|(a[2]&0xff)<<16|(a[3]&0xff)<<24)>>>0};function count_array(a){var b=todword(a);var n=0;a=a.slice(P);while(b>0){var c;if(b<P){return-1}c=todword(a);c+=P;if(c>b){return-1}++n;a=a.slice(c);b-=c}return n};function struct_field(a,b){var c,fn,header,i;if(b<P){return-1}fn=toword(a);header=Q+R*fn;if(b<header){return-1}c=a.slice(Q);b-=header;a=a.slice(header);for(i=0;i<fn;i++){var d=toword(c.slice(i*R+Q));var e;if(d!=0){continue}if(b<P){return-1}e=todword(a);if(b<P+e){return-1}a=a.slice(P+e);b-=P+e}return fn};function import_string(s,a){var b=todword(a);var c="";var d=a.slice(P,P+b);for(var i=0;i<d.length;i++){c+=String.fromCharCode(d[i])}return c};function calc_pow(a,n){if(n==0)return 1;var r=calc_pow(a*a,Math.floor(n/2));if((n&1)!=0){r*=a}return r};function import_field(s,f,a){var b,result,fn;var c=0;var d=-1;f.tag=-1;f.type=-1;f.name=null;f.st=null;f.key=-1;f.extra=0;b=todword(a);a=a.slice(P);result=a.slice(b);fn=struct_field(a,b);if(fn<0)return null;a=a.slice(Q);for(var i=0;i<fn;i++){var e;++d;e=toword(a.slice(R*i));if(e&1!=0){d+=Math.floor(e/2);continue}if(d==0){if(e!=0)return null;f.name=import_string(s,a.slice(fn*R));continue}if(e==0)return null;e=Math.floor(e/2)-1;switch(d){case 1:if(e>=H){return null}f.type=e;break;case 2:if(f.type==E){f.extra=calc_pow(10,e)}else if(f.type==G){f.extra=e}else{if(e>=s.type_n){return null}if(f.type>=0){return null}f.type=H;f.st=e}break;case 3:f.tag=e;break;case 4:if(e!=0){c=N}break;case 5:f.key=e;break;default:return null}}if(f.tag<0||f.type<0||f.name==null){return null}f.type|=c;return result};function import_type(s,t,a){var b,fn,n,maxn,last;var c=todword(a);a=a.slice(P);b=a.slice(c);fn=struct_field(a,c);if(fn<=0||fn>2){return null}for(var i=0;i<fn*R;i+=R){var v=toword(a.slice(Q+i));if(v!=0)return null}t.name=null;t.n=0;t.base=0;t.maxn=0;t.f=null;a=a.slice(Q+fn*R);t.name=import_string(s,a);if(fn==1){return b}a=a.slice(todword(a)+P);n=count_array(a);if(n<0){return null}a=a.slice(P);maxn=n;last=-1;t.n=n;t.f=new Array();for(var i=0;i<n;i++){var d;t.f[i]=new Object();var f=t.f[i];a=import_field(s,f,a);if(a==null){return null}d=f.tag;if(d<=last){return null}if(d>last+1){++maxn}last=d}t.maxn=maxn;t.base=t.f[0].tag;n=t.f[n-1].tag-t.base+1;if(n!=t.n){t.base=-1}return b}function import_protocol(s,p,a){var b,sz,fn,tag;sz=todword(a);a=a.slice(P);b=a.slice(sz);fn=struct_field(a,sz);a=a.slice(Q);p.name=null;p.tag=-1;p.p=new Array();p.p[C]=null;p.p[D]=null;p.confirm=0;tag=0;for(var i=0;i<fn;i++,tag++){var c=toword(a.slice(R*i));if(c&1!=0){tag+=Math.floor(c-1)/2;continue}c=Math.floor(c/2)-1;switch(i){case 0:if(c!=-1){return null}p.name=import_string(s,a.slice(R*fn));break;case 1:if(c<0){return null}p.tag=c;break;case 2:if(c<0||c>=s.type_n)return null;p.p[C]=s.type[c];break;case 3:if(c<0||c>s.type_n)return null;p.p[D]=s.type[c];break;case 4:p.confirm=c;break;default:return null}}if(p.name==null||p.tag<0){return null}return b}function create_from_bundle(s,a,b){var c,typedata,protocoldata;var d=struct_field(a,b);if(d<0||d>2)return null;a=a.slice(Q);c=a.slice(d*R);for(var i=0;i<d;i++){var e=toword(a.slice(i*R));if(e!=0){return null}var n=count_array(c);if(n<0){return null}if(i==0){typedata=c.slice(P);s.type_n=n;s.type=new Array()}else{protocoldata=c.slice(P);s.protocol_n=n;s.proto=new Array()}c=c.slice(todword(c)+P)}for(var i=0;i<s.type_n;i++){s.type[i]=new Object();typedata=import_type(s,s.type[i],typedata);if(typedata==null){return null}}for(var i=0;i<s.protocol_n;i++){s.proto[i]=new Object();protocoldata=import_protocol(s,s.proto[i],protocoldata);if(protocoldata==null){return null}}return s};function sproto_dump(s){console.log(s)};function sproto_prototag(a,b){for(var i=0;i<a.protocol_n;i++){if(b==a.proto[i].name){return a.proto[i].tag}}return-1}function query_proto(a,b){var c=0;var d=a.protocol_n;while(c<d){var e=Math.floor((c+d)/2);var t=a.proto[e].tag;if(t==b){return a.proto[e]}if(b>t){c=e+1}else{d=e}}return null}function sproto_protoquery(a,b,c){var p=null;if(c<0||c>1){return null}p=query_proto(a,b);if(p){return p.p[c]}return null}function sproto_protoresponse(a,b){var p=query_proto(a,b);return(p!=null&&(p.p[D]||p.confirm))}function sproto_protoname(a,b){var p=query_proto(a,b);if(p){return p.name}return null}function sproto_type(a,b){for(var i=0;i<a.type_n;i++){if(b==a.type[i].name){return a.type[i]}}return null}function sproto_name(a){return a.name}function findtag(a,b){var c,end;if(a.base>=0){b-=a.base;if(b<0||b>a.n){return null}return a.f[b]}c=0;end=a.n;while(c<end){var d=Math.floor((c+end)/2);var f=a.f[d];var t=f.tag;if(t==b){return f}if(b>t){c=d+1}else{end=d}}return null}function fill_size(a,b,c){a[b]=c&0xff;a[b+1]=(c>>8)&0xff;a[b+2]=(c>>16)&0xff;a[b+3]=(c>>24)&0xff;return c+P}function encode_integer(v,a,b,c){a[b+4]=v&0xff;a[b+5]=(v>>8)&0xff;a[b+6]=(v>>16)&0xff;a[b+7]=(v>>24)&0xff;return fill_size(a,b,4)}function encode_uint64(v,a,b,c){a[b+4]=v&0xff;a[b+5]=uint64_rshift(v,8)&0xff;a[b+6]=uint64_rshift(v,16)&0xff;a[b+7]=uint64_rshift(v,24)&0xff;a[b+8]=uint64_rshift(v,32)&0xff;a[b+9]=uint64_rshift(v,40)&0xff;a[b+10]=uint64_rshift(v,48)&0xff;a[b+11]=uint64_rshift(v,56)&0xff;return fill_size(a,b,8)}function encode_object(a,b,c,d){var e;b.buffer=c;b.buffer_idx=d+P;e=a(b);if(e<0){if(e==L){return 0}return-1}return fill_size(c,d,e)}function uint32_to_uint64(a,b,c){if(a){b[c+4]=0xff;b[c+5]=0xff;b[c+6]=0xff;b[c+7]=0xff}else{b[c+4]=0;b[c+5]=0;b[c+6]=0;b[c+7]=0}}function encode_integer_array(a,b,c,d,e){var f,index;var g=d;d++;f=4;index=1;e.value=0;for(;;){var h;b.value=null;b.length=8;b.index=index;h=a(b);if(h<=0){if(h==L){break}if(h==M){e.value=1;break}return null}if(h==4){var v=b.value;c[d]=v&0xff;c[d+1]=(v>>8)&0xff;c[d+2]=(v>>16)&0xff;c[d+3]=(v>>24)&0xff;if(f==8){uint32_to_uint64(v&0x80000000,c,d)}}else{var v;if(h!=8){return null}if(f==4){d+=(index-1)*4;for(var i=index-2;i>=0;i--){var k;for(var j=(1+i*8);j<(1+i*8+4);j++){header[j]=header[j-i*4]}k=header[1+i*8+3]&0x80;uint32_to_uint64(k,c,d+1+i*8)}f=8}v=value;c[d]=v&0xff;c[d+1]=(v>>8)&0xff;c[d+2]=(v>>16)&0xff;c[d+3]=(v>>24)&0xff;c[d+4]=(v>>32)&0xff;c[d+5]=(v>>40)&0xff;c[d+6]=(v>>48)&0xff;c[d+7]=(v>>56)&0xff}d+=f;index++}if(d==g+1){return g}c[g]=f&0xff;return d}function encode_array(a,b,c,d){var e;var f=c;var g=d+P;switch(b.type){case E:var h={};h.value=0;g=encode_integer_array(a,b,f,g,h);if(g==null){return-1}if(h.value!=0){return 0}break;case F:b.index=1;for(;;){var v=0;b.value=v;b.length=4;e=a(b);if(e<0){if(e==L)break;if(e==M)return 0;return-1}if(e<1){return-1}f[g]=(b.value==1)?1:0;g++;++b.index}break;default:b.index=1;for(;;){b.buffer=f;b.buffer_idx=g+P;e=a(b);if(e<0){if(e==L){break}if(e==M){return 0}return-1}fill_size(f,g,e);g+=P+e;++b.index}break}e=g-(d+P);if(e==0){return 0}return fill_size(f,d,e)}function decode_array_object(a,b,c,d){var e;var f=1;while(d>0){if(d<P){return-1}e=todword(c);c=c.slice(P);d-=P;if(e>d){return-1}b.index=f;b.value=c;b.length=e;if(a(b)!=0){return-1}d-=e;c=c.slice(e);++f}return 0}function decode_array(a,b,c){var d=todword(c);var e=b.type;if(d==0){b.index=-1;b.value=null;b.length=0;a(b);return 0}c=c.slice(P);switch(e){case E:var f=c[0];c=c.slice(1);--d;if(f==4){if(d%4!=0){return-1}for(var i=0;i<Math.floor(d/4);i++){var g=expand64(todword(c.slice(i*4)));b.index=i+1;b.value=g;b.length=8;a(b)}}else if(f==8){if(d%8!=0){return-1}for(var i=0;i<Math.floor(d/8);i++){var h=todword(c.slice(i*8));var j=todword(c.slice(i*8+4));var g=hi_low_uint64(h,j);b.index=i+1;b.value=g;b.length=8;a(b)}}else{return-1}break;case F:for(var i=0;i<d;i++){var g=c[i];b.index=i+1;b.value=g;b.length=8;a(b)}break;case G:case H:return decode_array_object(a,b,c,d);default:return-1}return 0}function pack_seg(a,b,c,d,e,n){var f=0;var g=0;var h=d;d++;e--;if(e<0){h=null}for(var i=0;i<8;i++){if(a[b+i]!=0){g++;f|=1<<i;if(e>0){c[d]=a[b+i];++d;--e}}}if((g==7||g==6)&&n>0){g=8}if(g==8){if(n>0){return 8}else{return 10}}if(h!=null){c[h]=f}return g+1}function write_ff(a,b,c,d,n){var e=(n+7)&(~7);c[d]=0xff;c[d+1]=Math.floor(e/8)-1;for(var i=0;i<n;i++){c[d+i+2]=a[b+i]}for(var i=0;i<e-n;i++){c[d+n+2+i]=0}}function sproto_pack(a,b,c,d){var e=new Array(8);var f,ff_desstart;var g=0;var h=0;var k=0;var l=0;var m=a;var o=c;var p=a.length;var q=1<<30;for(var i=0;i<p;i+=8){var n;var r=i+8-p;if(r>0){for(var j=0;j<8-r;j++){e[j]=m[b+j]}for(var j=0;j<r;j++){e[7-j]=0}m=e;b=0}n=pack_seg(m,b,o,d,q,k);q-=n;if(n==10){f=m;g=b;ff_desstart=o;h=d;k=1}else if(n==8&&k>0){++k;if(k==256){if(q>=0){write_ff(f,g,ff_desstart,h,256*8)}k=0}}else{if(k>0){if(q>=0){write_ff(f,g,ff_desstart,h,k*8)}k=0}}b+=8;d+=n;l+=n}if(q>=0){if(k==1){write_ff(f,g,ff_desstart,h,8)}else if(k>1){write_ff(f,g,ff_desstart,h,p-g)}if(o.length>l){for(var i=l;i<o.length;i++){o[i]=0}}}return l}function sproto_unpack(a,b,c,d){var e=a;var f=c;var g=0;var h=a.length;var j=1<<30;while(h>0){var k=e[b];--h;++b;if(k==0xff){var n;if(h<0){return-1}n=(e[b]+1)*8;if(h<n+1)return-1;h-=n+1;++b;if(j>=n){for(var i=0;i<n;i++){f[d+i]=e[b+i]}}j-=n;d+=n;b+=n;g+=n}else{for(var i=0;i<8;i++){var l=(k>>>i)&1;if(l!=0){if(h<0)return-1;if(j>0){f[d]=e[b];--j;++d}++b;--h}else{if(j>0){f[d]=0;--j;++d}}++g}}}return g}t.pack=function(a){var b=0;var c=new Array();var d=0;var e=sproto_pack(a,b,c,d);return c},t.unpack=function(a){var b=0;var c=new Array();var d=0;var e=sproto_unpack(a,b,c,d);return c},t.createNew=function(u){var s={};var w=new Object();var x=new Array();var y;s.type_n=0;s.protocol_n=0;s.type=null;s.proto=null;s.tcache={};s.pcache={};var z=create_from_bundle(s,u,u.length);if(z==null)return null;function sproto_encode(a,b,c,d,e){var g=new Object();var h=c;var j=c;var k=Q+a.maxn*R;var l,lasttag,datasz;g.ud=e;j=h+k;l=0;lasttag=-1;for(var i=0;i<a.n;i++){var f=a.f[i];var m=f.type;var n=0;var o=-1;g.tagname=f.name;g.tagid=f.tag;if(f.st!=null){g.subtype=z.type[f.st]}else{g.subtype=null}g.mainindex=f.key;g.extra=f.extra;var p=m&N;if((m&N)!=0){g.type=m&~N;o=encode_array(d,g,b,j)}else{g.type=m;g.index=0;switch(m){case E:case F:g.value=0;g.length=8;g.buffer=b;g.buffer_idx=c;o=d(g);if(o<0){if(o==L)continue;if(o==M)return 0;return-1}if(o==4){if(g.value<0x7fff){n=(g.value+1)*2;o=2}else{o=encode_integer(g.value,b,j,o)}}else if(o==8){o=encode_uint64(g.value,b,j,o)}else{return-1}break;case H:case G:o=encode_object(d,g,b,j);break}}if(o<0)return-1;if(o>0){var q,tag;if(n==0){j+=o}q=h+Q+R*l;tag=f.tag-lasttag-1;if(tag>0){tag=(tag-1)*2+1;if(tag>0xffff)return-1;b[q]=tag&0xff;b[q+1]=(tag>>8)&0xff;++l;q+=R}++l;b[q]=n&0xff;b[q+1]=(n>>8)&0xff;lasttag=f.tag}}b[h]=l&0xff;b[h+1]=(l>>8)&0xff;datasz=j-(h+k);j=h+k;if(l!=a.maxn){var v=b.slice(j,j+datasz);for(var s=0;s<v.length;s++){b[h+Q+l*R+s]=v[s]}var r=b.length-(h+Q+l*R+v.length);b.splice(h+Q+l*R+v.length,b.length)}return Q+l*R+datasz}function encode(a){var b=a.ud;if(b.deep>=U){alert("table is too deep");return-1}if(b.indata[a.tagname]==null){return L}var c=null;if(a.index>0){if(a.tagname!=b.array_tag){b.array_tag=a.tagname;var d=typeof(b.indata[a.tagname]);if(typeof(b.indata[a.tagname])!="object"){b.array_index=0;return L}if(b.indata[a.tagname].length==0||b.indata[a.tagname].length==null){b.array_index=0;return M}}c=b.indata[a.tagname][a.index-1];if(c==null){return L}}else{c=b.indata[a.tagname]}switch(a.type){case E:{var v,vh,isnum;if(a.extra>0){var e=c;v=Math.floor(e*a.extra+0.5)}else{v=c}vh=uint64_rshift(v,31);if(vh==0||vh==-1){a.value=v>>>0;return 4}else{a.value=v;return 8}}case F:{if(c==true){a.value=1}else if(c==false){a.value=0}return 4}case G:{var f;if(a.extra){f=c}else{var g=c;f=utils.string2utf8(g)}var h=f.length;if(h>a.length){a.length=h}for(var i=0;i<f.length;i++){a.buffer[a.buffer_idx+i]=f[i]}return h}case H:{var j=new Object();j.st=a.subtype;j.deep=b.deep+1;j.indata=c;var r=sproto_encode(a.subtype,a.buffer,a.buffer_idx,encode,j);if(r<0){return K}return r}default:alert("Invalid filed type "+a.type);return K}}function sproto_decode(a,b,c,d,e){var g=new Object();var h=c;var j,datastream,fn,tag;if(c<Q)return-1;j=b.slice(0);fn=toword(j);j=j.slice(Q);c-=Q;if(c<fn*R)return-1;datastream=j.slice(fn*R);c-=fn*R;g.ud=e;tag=-1;for(var i=0;i<fn;i++){var k=null;var f=null;var l=toword(j.slice(i*R));++tag;if(l&1!=0){tag+=Math.floor(l/2);continue}l=Math.floor(l/2)-1;k=datastream.slice(0);if(l<0){var m;if(c<P){return-1}m=todword(datastream);if(c<m+P){return-1}datastream=datastream.slice(m+P);c-=m+P}f=findtag(a,tag);if(f==null){continue}g.tagname=f.name;g.tagid=f.tag;g.type=f.type&~N;if(f.st!=null){g.subtype=z.type[f.st]}else{g.subtype=null}g.index=0;g.mainindex=f.key;g.extra=f.extra;if(l<0){if((f.type&N)!=0){if(decode_array(d,g,k)){return-1}}else{switch(f.type){case E:{var m=todword(k);if(m==4){var v=expand64(todword(k.slice(P)));g.value=v;g.length=8;d(g)}else if(m!=8){return-1}else{var n=todword(k.slice(P));var o=todword(k.slice(P+4));var v=hi_low_long(n,o);g.value=v;g.length=8;d(g)}break}case G:case H:{var m=todword(k);g.value=k.slice(P);g.length=m;if(d(g)!=0){return-1}break}default:return-1}}}else if(f.type!=E&&f.type!=F){return-1}else{g.value=l;g.length=8;d(g)}}return h-c}function decode(a){var b=a.ud;var c;if(b.deep>=U){alert("the table is too deep")}if(a.index!=0){if(a.tagname!=b.array_tag){b.array_tag=a.tagname;b.result[a.tagname]=new Array();if(a.index<0){return 0}}}switch(a.type){case E:{if(a.extra){var v=a.value;var d=v;c=d/a.extra}else{c=a.value}break}case F:{if(a.value==1){c=true}else if(a.value==0){c=false}else{c=null}break}case G:{var e=new Array();for(var i=0;i<a.length;i++){e.push(a.value[i])}if(a.extra){c=e}else{c=utils.utf82string(e)}break}case H:{var f=new Object();var r;f.deep=b.deep+1;f.array_index=0;f.array_tag=null;f.result=new Object();if(a.mainindex>=0){f.mainindex_tag=a.mainindex;r=sproto_decode(a.subtype,a.value,a.length,decode,f);if(r<0||r!=a.length){return r}c=f.result;break}else{f.mainindex_tag=-1;f.key_index=0;r=sproto_decode(a.subtype,a.value,a.length,decode,f);if(r<0){return K}if(r!=a.length)return r;c=f.result;break}}default:alert("Invalid type")}if(a.index>0){b.result[a.tagname][a.index-1]=c}else{b.result[a.tagname]=c}return 0}function querytype(a,b){var v=a.tcache[b];if(v===null||v===undefined){v=sproto_type(a,b);a.tcache[b]=v}return v}function protocol(a,b){var c=null;var d=null;if(typeof(b)=="number"){c=b;d=sproto_protoname(a,b);if(d===null)return null}else{c=sproto_prototag(a,b);d=c;if(c===-1)return null}var e=sproto_protoquery(a,c,C);var f=sproto_protoquery(a,c,D);return{ret1:d,request:e,response:f}}function queryproto(a,b){var v=a.pcache[b];if(v===null||v===undefined){var c=protocol(a,b);var d=c.ret1;var e=c.request;var f=c.response;if(typeof(b)==="number"){var g=d;d=b;b=g}v={request:e,response:f,name:b,tag:d,};a.pcache[b]=v;a.pcache[d]=v}return v}z.dump=function(){console.debug("========== index dump ==========");sproto_dump(this);console.debug("=================================")};z.objlen=function(a,b){var c=null;if(typeof(a)==="string"||typeof(a)==="number"){c=querytype(z,a);if(c==null){return null}}else{c=a}var d=new Object();d.array_tag=null;d.deep=0;d.result=new Object();return sproto_decode(c,b,b.length,decode,d)};z.encode=function(a,b){var c=new Object();var d=null;if(typeof(a)==="string"||typeof(a)==="number"){d=querytype(z,a);if(d==null)return null}else{d=a}var e=2;var f=new Array();var g=0;c.st=d;c.tbl_index=e;c.indata=b;for(;;){c.array_tag=null;c.array_index=0;c.deep=0;c.iter_index=e+1;var r=sproto_encode(d,f,g,encode,c);if(r<0){return null}else{return f}}};z.decode=function(a,b){var c=null;if(typeof(a)==="string"||typeof(a)==="number"){c=querytype(z,a);if(c==null){return null}}else{c=a}var d=b;var e=b.length;var f=new Object();f.array_tag=null;f.deep=0;f.result=new Object();var r=sproto_decode(c,d,e,decode,f);if(r<0){return null}return f.result};z.pack=function(a){return t.pack(a)};z.unpack=function(a){return t.unpack(a)};z.pencode=function(a,b){var c=z.encode(a,b);if(c==null){return null}return z.pack(c)};z.pdecode=function(a,b){var c=z.unpack(b);if(c==null){return null}return z.decode(a,c)};z.host=function(b){function cla(a){a=a?a:"package";this.proto=z;this.package=querytype(z,a);this.package=this.package?this.package:"package";this.session={}}cla.prototype=A;return new cla(b)};A.attach=function(a){this.attachsp=a;var b=this;return(name,args,session)=>{var c=queryproto(a,name);B.type=c.tag;B.session=session;var d=a.encode(b.package,B);if(session){b.session[session]=c.response?c.response:true}if(args){var e=a.encode(c.request,args);return a.pack(utils.arrayconcat(d,e))}else{return a.pack(d)}}};function gen_response(d,e,f){return function(a){B.type=null;B.session=f;var b=d.proto.encode(d.package,B);if(e){var c=d.proto.encode(e,a);return d.proto.pack(utils.arrayconcat(b,c))}else{return d.proto.pack(b)}}}A.dispatch=function(a){var b=this.proto;var c=b.unpack(a);B.type=null;B.session=null;B=b.decode(this.package,c);var d=b.objlen(this.package,c);var e=c.slice(d,c.length);if(B.type){var f=queryproto(b,B.type);var g;if(f.request){g=b.decode(f.request,e)}if(B.session){return{type:"REQUEST",pname:f.name,result:g,responseFunc:gen_response(this,f.response,B.session),session:B.session,}}else{return{type:"REQUEST",pname:f.name,result:g,}}}else{b=this.attachsp;var h=B.session;var i=this.session[h];delete this.session[h];if(i===true){return{type:"RESPONSE",session:h,}}else{var g=b.decode(i,e);return{type:"RESPONSE",session:h,result:g,}}}};return z};return t}());module.exports=sproto;;